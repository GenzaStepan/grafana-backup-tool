{"meta": {"hasAcl": false, "provisioned": false, "canSave": true, "canAdmin": true, "folderUrl": "/dashboards/f/JryIe1xGk/hercules", "created": "2020-12-26T14:51:14+03:00", "url": "/d/9Ono4bxGk/api", "canStar": true, "expires": "0001-01-01T00:00:00Z", "isFolder": false, "updated": "2020-12-26T14:51:50+03:00", "slug": "api", "folderTitle": "Hercules", "version": 2, "provisionedExternalId": "", "createdBy": "admin", "updatedBy": "admin", "folderId": 11, "type": "db", "canEdit": true}, "dashboard": {"style": "dark", "templating": {"list": [{"regex": "", "multi": false, "hide": 0, "name": "environment", "skipUrlSync": false, "refresh": 1, "label": "Environment", "current": {"text": "Prometheus", "selected": false, "value": "Prometheus"}, "queryValue": "", "query": "prometheus", "type": "datasource", "options": [], "includeAll": false}, {"regex": "", "definition": "label_values(gill_api_timing{},namespace)", "multi": false, "hide": 0, "name": "namespace", "tags": [], "allValue": null, "tagValuesQuery": "", "skipUrlSync": false, "refresh": 2, "label": "Namespace", "current": {"text": "<NULL>", "selected": false, "value": "<NULL>"}, "sort": 5, "datasource": "$environment", "type": "query", "query": "label_values(gill_api_timing{},namespace)", "useTags": false, "tagsQuery": "", "options": [], "includeAll": false}, {"regex": "", "definition": "label_values(gill_api_timing{namespace=\"$namespace\",service_name=~\".*.Api\"},service_name)", "multi": false, "hide": 0, "name": "service_name", "tags": [], "allValue": null, "tagValuesQuery": "", "skipUrlSync": false, "refresh": 2, "label": "Service Name", "current": {"text": "Geko.Site.Api", "selected": false, "value": "Geko.Site.Api"}, "sort": 5, "datasource": "$environment", "type": "query", "query": "label_values(gill_api_timing{namespace=\"$namespace\",service_name=~\".*.Api\"},service_name)", "useTags": false, "tagsQuery": "", "options": [], "includeAll": false}, {"regex": "", "definition": "label_values(gill_api_timing{service_name=\"$service_name\",namespace=\"$namespace\"},service_version)", "multi": false, "hide": 0, "name": "service_version", "tags": [], "allValue": ".*", "tagValuesQuery": "", "skipUrlSync": false, "refresh": 2, "label": "Service Version", "current": {"text": "All", "selected": false, "value": "$__all"}, "sort": 5, "datasource": "$environment", "type": "query", "query": "label_values(gill_api_timing{service_name=\"$service_name\",namespace=\"$namespace\"},service_version)", "useTags": false, "tagsQuery": "", "options": [], "includeAll": true}]}, "links": [], "tags": [], "iteration": 1608983503877, "time": {"to": "now", "from": "now-30m"}, "editable": true, "refresh": "10s", "annotations": {"list": [{"enable": true, "hide": true, "name": "Annotations & Alerts", "builtIn": 1, "datasource": "-- Grafana --", "type": "dashboard", "iconColor": "rgba(0, 211, 255, 1)"}]}, "gnetId": null, "timepicker": {"refresh_intervals": ["5s", "10s", "30s", "1m", "5m", "15m", "30m", "1h", "2h", "1d"]}, "title": "API", "version": 2, "graphTooltip": 0, "timezone": "", "schemaVersion": 26, "panels": [{"timeFrom": null, "fieldConfig": {"overrides": [], "defaults": {"thresholds": {"steps": [{"color": "green", "value": null}, {"color": "red", "value": 60}], "mode": "absolute"}, "min": 0, "mappings": [], "unit": "s", "custom": {}}}, "title": "\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0432\u0440\u0435\u043c\u044f \u0437\u0430\u043f\u0440\u043e\u0441\u0430", "timeShift": null, "options": {"justifyMode": "auto", "graphMode": "area", "orientation": "auto", "textMode": "auto", "colorMode": "value", "reduceOptions": {"fields": "", "calcs": ["max"], "values": false}}, "targets": [{"expr": "max(gill_api_timing{namespace=\"$namespace\", service_name=\"$service_name\", service_version=~\"$service_version\", type=\"Max\", name=\"TotalTime\"})", "interval": "", "refId": "A", "legendFormat": ""}], "pluginVersion": "7.1.5", "datasource": "$environment", "gridPos": {"y": 0, "h": 5, "w": 4, "x": 0}, "type": "stat", "id": 109, "description": ""}, {"timeFrom": null, "fieldConfig": {"overrides": [], "defaults": {"thresholds": {"steps": [{"color": "green", "value": null}, {"color": "red", "value": 60}], "mode": "absolute"}, "min": 0, "mappings": [], "unit": "s", "custom": {}}}, "title": "\u0421\u0440\u0435\u0434\u043d\u0435\u0435 \u0432\u0440\u0435\u043c\u044f \u0437\u0430\u043f\u0440\u043e\u0441\u0430", "timeShift": null, "options": {"justifyMode": "auto", "graphMode": "area", "orientation": "auto", "textMode": "auto", "colorMode": "value", "reduceOptions": {"fields": "", "calcs": ["mean"], "values": false}}, "targets": [{"expr": "avg(gill_api_timing{namespace=\"$namespace\", service_name=\"$service_name\", service_version=~\"$service_version\", type=\"Avg\", name=\"TotalTime\"})", "interval": "", "refId": "A", "legendFormat": ""}], "pluginVersion": "7.1.5", "datasource": "$environment", "gridPos": {"y": 0, "h": 5, "w": 4, "x": 4}, "type": "stat", "id": 126, "description": ""}, {"timeFrom": null, "fieldConfig": {"overrides": [], "defaults": {"thresholds": {"steps": [{"color": "green", "value": null}], "mode": "absolute"}, "mappings": [], "unit": "short", "custom": {}}}, "title": "\u041a\u043e\u043b-\u0432\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432", "timeShift": null, "options": {"justifyMode": "auto", "graphMode": "none", "orientation": "auto", "textMode": "auto", "colorMode": "value", "reduceOptions": {"fields": "", "calcs": ["last"], "values": false}}, "targets": [{"expr": "sum(gill_api_timing{namespace=\"$namespace\", service_name=\"$service_name\", service_version=~\"$service_version\", type=\"Total\", name=\"TotalTime\"})", "interval": "", "refId": "A", "legendFormat": ""}], "pluginVersion": "7.1.5", "datasource": "$environment", "gridPos": {"y": 0, "h": 5, "w": 4, "x": 8}, "type": "stat", "id": 113, "description": ""}, {"timeFrom": null, "fieldConfig": {"overrides": [], "defaults": {"mappings": [], "min": 0, "thresholds": {"steps": [{"color": "dark-red", "value": null}, {"color": "green", "value": 1}], "mode": "absolute"}, "noValue": "\u043d\u0435\u0442", "custom": {}, "decimals": 0, "unit": "short"}}, "title": "\u041a\u043e\u043b-\u0432\u043e \u0438\u043d\u0441\u0442\u0430\u043d\u0441\u043e\u0432", "timeShift": null, "options": {"justifyMode": "auto", "graphMode": "area", "orientation": "auto", "textMode": "auto", "colorMode": "value", "reduceOptions": {"fields": "", "calcs": ["last"], "values": false}}, "targets": [{"expr": "count(gill_up_time_seconds{namespace=\"$namespace\", service_name=\"$service_name\"})", "interval": "", "refId": "A", "legendFormat": ""}], "pluginVersion": "7.1.5", "datasource": "$environment", "gridPos": {"y": 0, "h": 5, "w": 4, "x": 13}, "type": "stat", "id": 127, "description": ""}, {"timeFrom": null, "fieldConfig": {"overrides": [], "defaults": {"thresholds": {"steps": [{"color": "green", "value": null}], "mode": "absolute"}, "mappings": [], "unit": "s", "custom": {}}}, "title": "Panel Title", "timeShift": null, "options": {"showUnfilled": true, "displayMode": "gradient", "orientation": "horizontal", "reduceOptions": {"fields": "", "calcs": ["last"], "values": false}}, "targets": [{"expr": "gill_up_time_seconds{service_name=~\"$service_name\", namespace=\"$namespace\"}", "interval": "", "refId": "A", "legendFormat": "{{host_name}}"}], "pluginVersion": "7.1.5", "datasource": "$environment", "gridPos": {"y": 0, "h": 5, "w": 7, "x": 17}, "type": "bargauge", "id": 132}, {"timeFrom": null, "fieldConfig": {"overrides": [], "defaults": {"custom": {}}}, "title": "\u0421\u0441\u044b\u043b\u043a\u0438", "timeShift": null, "options": {"content": "K8s service:     <a style=\"color: rgb(115, 191, 105); font-size: 20px\" href=\"http://dashboard-dev.ugsk.ru/#/service/${namespace}/${service_name}?namespace=${namespace}\" target=\"_blank\">${service_name}</a>\r\n<br/>\r\nSwagger: <a style=\"color: rgb(115, 191, 105); font-size: 20px\" href=\"https://pro-dev.ugsk.ru/${namespace}/${service_name}/swagger\" target=\"_blank\">${service_name}</a>", "mode": "html"}, "pluginVersion": "7.1.0", "datasource": null, "gridPos": {"y": 5, "h": 5, "w": 8, "x": 0}, "type": "text", "id": 125}, {"timeFrom": null, "fieldConfig": {"overrides": [{"matcher": {"id": "byName", "options": "Total"}, "properties": [{"id": "unit", "value": "short"}]}], "defaults": {"mappings": [], "min": 0, "thresholds": {"steps": [{"color": "green", "value": null}, {"color": "red", "value": 1}], "mode": "absolute"}, "noValue": "\u043d\u0435\u0442", "custom": {}, "unit": "none"}}, "title": "\u041a\u043e\u043b-\u0432\u043e \u043e\u0448\u0438\u0431\u043e\u043a (>= 400)", "timeShift": null, "options": {"showUnfilled": true, "displayMode": "basic", "orientation": "horizontal", "reduceOptions": {"fields": "", "calcs": ["last"], "values": false}}, "targets": [{"expr": "sum(gill_api_timing{namespace=\"$namespace\", service_name=\"$service_name\", service_version=~\"$service_version\", type=\"Total\", name=\"TotalTime\", status_code=~\"(4.*)|(5.*)\"}) by (status_code)", "interval": "", "instant": false, "refId": "A", "legendFormat": "{{status_code}}"}], "pluginVersion": "7.1.5", "datasource": "$environment", "gridPos": {"y": 5, "h": 5, "w": 4, "x": 8}, "type": "bargauge", "id": 129, "description": ""}, {"bars": false, "timeFrom": null, "hiddenSeries": false, "thresholds": [], "spaceLength": 10, "nullPointMode": "null", "pluginVersion": "7.1.5", "renderer": "flot", "gridPos": {"y": 10, "h": 6, "w": 24, "x": 0}, "linewidth": 1, "steppedLine": false, "id": 130, "fill": 1, "title": "\u0421\u0442\u0430\u0442\u0443\u0441\u044b \u0440\u0435\u043a\u0432\u0435\u0441\u0442\u043e\u0432", "tooltip": {"sort": 0, "shared": true, "value_type": "individual"}, "stack": false, "targets": [{"expr": "sum(gill_api_timing{namespace=\"$namespace\", service_name=\"$service_name\", service_version=~\"$service_version\", type=\"Total\", name=\"TotalTime\"}) by (status_code)", "interval": "", "instant": false, "refId": "A", "legendFormat": "{{status_code}}"}, {"expr": "sum(gill_api_timing{namespace=\"$namespace\", service_name=\"$service_name\", service_version=~\"$service_version\", type=\"Total\", name=\"TotalTime\"})", "interval": "", "refId": "D", "legendFormat": "Total"}], "yaxes": [{"logBase": 1, "min": "0", "max": null, "format": "none", "label": null, "show": true, "decimals": null}, {"logBase": 1, "min": "0", "max": null, "format": "short", "label": "\u041a\u043e\u043b-\u0432\u043e", "show": true, "decimals": 0}], "xaxis": {"buckets": null, "show": true, "values": [], "mode": "time", "name": null}, "seriesOverrides": [{"color": "#1F60C4", "alias": "Total", "yaxis": 2, "zindex": -3, "fill": 0}], "percentage": false, "type": "graph", "dashes": false, "description": "", "dashLength": 10, "legend": {"total": false, "show": true, "max": false, "min": false, "current": false, "values": false, "avg": false}, "fieldConfig": {"overrides": [{"matcher": {"id": "byName", "options": "Total"}, "properties": [{"id": "unit", "value": "short"}]}], "defaults": {"thresholds": {"steps": [{"color": "green", "value": null}, {"color": "red", "value": 60}], "mode": "absolute"}, "mappings": [], "unit": "none", "custom": {}}}, "yaxis": {"align": false, "alignLevel": null}, "timeShift": null, "aliasColors": {}, "lines": true, "points": false, "datasource": "$environment", "pointradius": 2, "timeRegions": [], "fillGradient": 0}, {"bars": false, "timeFrom": null, "hiddenSeries": false, "thresholds": [], "spaceLength": 10, "nullPointMode": "null", "pluginVersion": "7.1.5", "renderer": "flot", "gridPos": {"y": 16, "h": 5, "w": 24, "x": 0}, "linewidth": 1, "steppedLine": false, "id": 112, "fill": 1, "title": "\u0412\u0440\u0435\u043c\u044f \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432", "tooltip": {"sort": 0, "shared": true, "value_type": "individual"}, "stack": false, "targets": [{"expr": "max(gill_api_timing{namespace=\"$namespace\", service_name=\"$service_name\", service_version=~\"$service_version\", type=\"Max\", name=\"TotalTime\"})", "interval": "", "instant": false, "refId": "A", "legendFormat": "Max"}, {"expr": "avg(gill_api_timing{namespace=\"$namespace\", service_name=\"$service_name\", service_version=~\"$service_version\", type=\"Avg\", name=\"TotalTime\"})", "interval": "", "refId": "B", "legendFormat": "Avg"}, {"expr": "min(gill_api_timing{namespace=\"$namespace\", service_name=\"$service_name\", service_version=~\"$service_version\", type=\"Min\", name=\"TotalTime\"})", "interval": "", "refId": "C", "legendFormat": "Min"}, {"expr": "sum(gill_api_timing{namespace=\"$namespace\", service_name=\"$service_name\", service_version=~\"$service_version\", type=\"Total\", name=\"TotalTime\"})", "interval": "", "refId": "D", "legendFormat": "Total"}], "yaxes": [{"logBase": 1, "min": "0", "max": null, "format": "s", "label": null, "show": true, "decimals": null}, {"logBase": 1, "min": "0", "max": null, "format": "short", "label": "\u041a\u043e\u043b-\u0432\u043e", "show": true, "decimals": 0}], "xaxis": {"buckets": null, "show": true, "values": [], "mode": "time", "name": null}, "seriesOverrides": [{"color": "#1F60C4", "alias": "Total", "yaxis": 2, "fill": 0}], "percentage": false, "type": "graph", "dashes": false, "description": "", "dashLength": 10, "legend": {"total": false, "show": true, "max": false, "min": false, "current": false, "values": false, "avg": false}, "fieldConfig": {"overrides": [{"matcher": {"id": "byName", "options": "Total"}, "properties": [{"id": "unit", "value": "short"}]}], "defaults": {"thresholds": {"steps": [{"color": "green", "value": null}, {"color": "red", "value": 60}], "mode": "absolute"}, "mappings": [], "unit": "s", "custom": {}}}, "yaxis": {"align": false, "alignLevel": null}, "timeShift": null, "aliasColors": {}, "lines": true, "points": false, "datasource": "$environment", "pointradius": 2, "timeRegions": [], "fillGradient": 0}, {"bars": false, "timeFrom": null, "hiddenSeries": false, "thresholds": [], "spaceLength": 10, "nullPointMode": "null", "pluginVersion": "7.1.5", "renderer": "flot", "gridPos": {"y": 21, "h": 5, "w": 24, "x": 0}, "linewidth": 1, "steppedLine": false, "id": 128, "fill": 1, "title": "\u041a\u043e\u043b-\u0432\u043e \u0438\u043d\u0441\u0442\u0430\u043d\u0441\u043e\u0432", "tooltip": {"sort": 0, "shared": true, "value_type": "individual"}, "stack": false, "targets": [{"expr": "count(gill_up_time_seconds{namespace=\"$namespace\", service_name=\"$service_name\"}) by (service_version)", "interval": "", "refId": "A", "legendFormat": "{{service_version}}"}], "yaxes": [{"logBase": 1, "min": "0", "max": null, "format": "short", "label": null, "show": true, "decimals": 0}, {"logBase": 1, "show": true, "max": null, "format": "short", "min": null, "label": null}], "xaxis": {"buckets": null, "show": true, "values": [], "mode": "time", "name": null}, "seriesOverrides": [], "percentage": false, "type": "graph", "dashes": false, "description": "", "dashLength": 10, "legend": {"total": false, "show": true, "max": false, "min": false, "current": false, "values": false, "avg": false}, "fieldConfig": {"overrides": [], "defaults": {"thresholds": {"steps": [{"color": "green", "value": null}], "mode": "absolute"}, "mappings": [], "unit": "short", "custom": {}}}, "yaxis": {"align": false, "alignLevel": null}, "timeShift": null, "aliasColors": {}, "lines": true, "points": false, "datasource": "$environment", "pointradius": 2, "timeRegions": [], "fillGradient": 0}], "id": 17, "uid": "9Ono4bxGk"}}